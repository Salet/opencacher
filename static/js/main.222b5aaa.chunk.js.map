{"version":3,"sources":["services/constants.ts","services/caches.ts","helpers/geolocation.ts","pages/nearby/nearby.tsx","components/compass/compass.tsx","pages/details/details.tsx","pages/app/app.tsx","serviceWorker.ts","index.tsx"],"names":["API_URL","CONSUMER_KEY","CachesService","geopoint","URL","concat","latitude","longitude","fetch","then","response","json","codes","join","code","toRadians","degrees","Math","PI","calculateGeoPointDegreeBearing","startPoint","endPoint","startLat","startLng","endLat","endLng","y","sin","cos","x","brng","atan2","calculateGeoPointMeterDistance","a","b","aLat","aLng","bLat","latDistance","lngDistance","haversine","sqrt","Nearby","props","state","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","cachesService","nearestCodes","nearestDetails","fetchCachesNearest","geolocation","handleCachesNearest","bind","assertThisInitialized","prevProps","setState","results","fetchCachesDetails","handleCachesDetails","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","push","objectSpread","distance","location","split","err","return","cache","_this2","react_default","createElement","className","key","onClick","onCacheClick","name","round","type","rating","size2","terrain","recommendations","_this3","length","map","renderCache","Component","Compass","_ref","heading","bearing","style","transform","toFixed","EMPTY_CACHE","status","difficulty","description","latest_logs","Details","interval","tab","setInterval","onRefreshGeolocation","fetchCacheDetails","extendedCache","clearInterval","log","logDate","Date","date","uuid","user","username","toLocaleString","dangerouslySetInnerHTML","__html","comment","renderLog","compass_compass","_","switchTab","renderTab","App","page","currentCache","geolocationReliable","geolocationObject","navigator","geolocationEnabled","accuracy","orientationReliable","orientationRelativeEvents","window","orientationAbsoluteEvents","orientation","absolute","alpha","beta","gamma","webkitCompassHeading","trueBearing","addEventListener","handleOrientationEvent","performGeolocation","getCurrentPosition","handlePositionEvent","enableHighAccuracy","event","position","coords","setPage","href","JSON","stringify","nearby_Nearby","handleCacheClick","details_Details","Boolean","hostname","match","ReactDOM","render","app_App","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.222b5aaa.chunk.js","sourcesContent":["export const API_URL = \"https://opencaching.pl/okapi/\";\r\nexport const CONSUMER_KEY = \"?consumer_key=8v5yBJfdTpcsxEnzUPah\";\r\n","import { API_URL, CONSUMER_KEY } from \"./constants\";\r\nimport { Geopoint } from \"../interfaces/geolocation\";\r\nimport { CacheDetails } from \"../interfaces/caches\";\r\n\r\nexport interface CachesDetailsResponse {\r\n  [code: string]: CacheDetails;\r\n}\r\n\r\nexport interface CachesNearestResponse {\r\n  results: Array<string>;\r\n}\r\n\r\nexport default class CachesService {\r\n  fetchCachesNearest(geopoint: Geopoint): Promise<CachesNearestResponse> {\r\n    const ENDPOINT = \"services/caches/search/nearest\";\r\n    const URL = `${API_URL}${ENDPOINT}${CONSUMER_KEY}&center=${\r\n      geopoint.latitude\r\n    }|${geopoint.longitude}`;\r\n    return fetch(URL).then(response => response.json());\r\n  }\r\n\r\n  fetchCachesDetails(codes: Array<string>): Promise<CachesDetailsResponse> {\r\n    const ENDPOINT = \"services/caches/geocaches\";\r\n    const URL = `${API_URL}${ENDPOINT}${CONSUMER_KEY}&cache_codes=${codes.join(\r\n      \"|\"\r\n    )}&fields=code|name|location|type|status|size2|difficulty|terrain|rating|recommendations`;\r\n    return fetch(URL).then(response => response.json());\r\n  }\r\n\r\n  fetchCacheDetails(code: string): Promise<any> {\r\n    const ENDPOINT = \"services/caches/geocache\";\r\n    const URL = `${API_URL}${ENDPOINT}${CONSUMER_KEY}&cache_code=${code}&fields=description|latest_logs`;\r\n    return fetch(URL).then(response => response.json());\r\n  }\r\n}\r\n","import { Geopoint } from \"../interfaces/geolocation\";\r\n\r\nfunction toRadians(degrees: number) {\r\n  return (degrees * Math.PI) / 180;\r\n}\r\n\r\nfunction toDegrees(radians: number) {\r\n  return (radians * 180) / Math.PI;\r\n}\r\n\r\nexport function calculateGeoPointDegreeBearing(\r\n  startPoint: Geopoint,\r\n  endPoint: Geopoint\r\n) {\r\n  const startLat = toRadians(startPoint.latitude);\r\n  const startLng = toRadians(startPoint.longitude);\r\n  const endLat = toRadians(endPoint.latitude);\r\n  const endLng = toRadians(endPoint.longitude);\r\n\r\n  const y = Math.sin(endLng - startLng) * Math.cos(endLat);\r\n  const x =\r\n    Math.cos(startLat) * Math.sin(endLat) -\r\n    Math.sin(startLat) * Math.cos(endLat) * Math.cos(endLng - startLng);\r\n  let brng = Math.atan2(y, x);\r\n  brng = toDegrees(brng);\r\n  return (brng + 360) % 360;\r\n}\r\n\r\nexport function calculateGeoPointMeterDistance(\r\n  a: Geopoint,\r\n  b: Geopoint\r\n): number {\r\n  const aLat = toRadians(a.latitude);\r\n  const aLng = toRadians(a.longitude);\r\n  const bLat = toRadians(b.latitude);\r\n  const bLng = toRadians(b.longitude);\r\n  const latDistance = bLat - aLat;\r\n  const lngDistance = bLng - aLng;\r\n  const haversine =\r\n    Math.sin(latDistance / 2) * Math.sin(latDistance / 2) +\r\n    Math.cos(aLat) *\r\n      Math.cos(bLat) *\r\n      Math.sin(lngDistance / 2) *\r\n      Math.sin(lngDistance / 2);\r\n  return (\r\n    6378.137 *\r\n    2 *\r\n    Math.atan2(Math.sqrt(haversine), Math.sqrt(1 - haversine)) *\r\n    1000\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Geolocation } from \"../../interfaces/geolocation\";\r\nimport { CacheDetailsWithDistance } from \"../../interfaces/caches\";\r\nimport CachesService, {\r\n  CachesNearestResponse,\r\n  CachesDetailsResponse\r\n} from \"../../services/caches\";\r\nimport { calculateGeoPointMeterDistance } from \"../../helpers/geolocation\";\r\nimport \"./nearby.css\";\r\n\r\ninterface NearbyProps {\r\n  geolocation: Geolocation;\r\n  onCacheClick: Function;\r\n}\r\n\r\ninterface NearbyState {\r\n  nearestCodes: Array<string>;\r\n  nearestDetails: Array<CacheDetailsWithDistance>;\r\n}\r\n\r\nexport default class Nearby extends Component<NearbyProps, NearbyState> {\r\n  cachesService = new CachesService();\r\n\r\n  constructor(props: NearbyProps, state: NearbyState) {\r\n    super(props, state);\r\n    this.state = {\r\n      nearestCodes: [],\r\n      nearestDetails: []\r\n    };\r\n    this.cachesService\r\n      .fetchCachesNearest(this.props.geolocation)\r\n      .then(this.handleCachesNearest.bind(this));\r\n  }\r\n\r\n  componentDidUpdate(prevProps: NearbyProps) {\r\n    if (this.props.geolocation.latitude !== prevProps.geolocation.latitude) {\r\n      this.cachesService\r\n        .fetchCachesNearest(this.props.geolocation)\r\n        .then(this.handleCachesNearest.bind(this));\r\n    }\r\n  }\r\n\r\n  handleCachesNearest(response: CachesNearestResponse): void {\r\n    this.setState({ nearestCodes: response.results });\r\n    this.cachesService\r\n      .fetchCachesDetails(this.state.nearestCodes)\r\n      .then(this.handleCachesDetails.bind(this));\r\n  }\r\n\r\n  handleCachesDetails(response: CachesDetailsResponse): void {\r\n    let nearestDetails = [];\r\n    for (let code of this.state.nearestCodes) {\r\n      if (!response[code]) {\r\n        continue;\r\n      }\r\n      nearestDetails.push({\r\n        distance: !!response[code].location\r\n          ? calculateGeoPointMeterDistance(\r\n            {\r\n              latitude: this.props.geolocation.latitude,\r\n              longitude: this.props.geolocation.longitude\r\n            },\r\n            {\r\n              latitude: +response[code].location.split(\"|\")[0],\r\n              longitude: +response[code].location.split(\"|\")[1]\r\n            }\r\n          )\r\n          : 0,\r\n        ...(response[code] as CacheDetailsWithDistance)\r\n      });\r\n    }\r\n    this.setState({ nearestDetails: nearestDetails });\r\n  }\r\n\r\n  renderCache(cache: any) {\r\n    return (\r\n      <div\r\n        className=\"Nearby-cache\"\r\n        key={cache.code}\r\n        onClick={() => {\r\n          this.props.onCacheClick(cache);\r\n        }}\r\n      >\r\n        <h3>{cache.name}</h3>\r\n        <p>\r\n          Dystans: ~{Math.round(cache.distance)}m | Typ: {cache.type} | Ocena:{\" \"}\r\n          {cache.rating} | Rozmiar: {cache.size2} | Teren: {cache.terrain} |\r\n          Rekomendacje: {cache.recommendations}\r\n        </p>\r\n        <hr className=\"Nearby-separator\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Nearby\">\r\n        {!this.state.nearestDetails.length && <p>Loading...</p>}\r\n        {this.state.nearestDetails.map(cache => this.renderCache(cache))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./compass.css\";\r\n\r\nconst Compass = ({ heading, bearing, distance }: { heading: number; bearing: number; distance: number }) => {\r\n  return (\r\n    <div className=\"Compass\">\r\n      <div className=\"Compass-background\" style={{ transform: `rotateZ(${360 - heading}deg)` }}>\r\n        <span className=\"Compass-north\">N</span>\r\n      </div>\r\n      <div className=\"Compass-cache\" style={{ transform: `rotateZ(${360 - heading + bearing}deg)` }}>\r\n        |\r\n      </div>\r\n      <div className=\"Compass-front\">\r\n        <br />|\r\n      </div>\r\n      <div className=\"Compass-distance\">{distance.toFixed(2)}m</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Compass;\r\n","import React, { Component } from \"react\";\r\nimport { CacheDetailsWithDistance, CacheDetailsExtended, CacheLog } from \"../../interfaces/caches\";\r\nimport CachesService from \"../../services/caches\";\r\nimport { calculateGeoPointMeterDistance, calculateGeoPointDegreeBearing } from \"../../helpers/geolocation\";\r\nimport { Geolocation } from \"../../interfaces/geolocation\";\r\nimport CompassComponent from \"../../components/compass/compass\";\r\nimport \"./details.css\";\r\n\r\ninterface DetailsProps {\r\n  cache: CacheDetailsWithDistance;\r\n  geolocation: Geolocation;\r\n  heading: number;\r\n  onRefreshGeolocation: Function;\r\n}\r\n\r\ninterface DetailsState {\r\n  cache: CacheDetailsExtended;\r\n  bearing: number;\r\n  distance: number;\r\n  tab: Tabs;\r\n}\r\n\r\nconst EMPTY_CACHE = {\r\n  distance: 0,\r\n  code: \"\",\r\n  name: \"\",\r\n  location: \"\",\r\n  status: \"\",\r\n  type: \"\",\r\n  size2: \"\",\r\n  difficulty: 0,\r\n  terrain: 0,\r\n  rating: 0,\r\n  recommendations: 0,\r\n  description: \"\",\r\n  latest_logs: []\r\n};\r\n\r\ntype Tabs = \"description\" | \"logs\" | \"compass\" | \"photos\";\r\n\r\nexport default class Details extends Component<DetailsProps, DetailsState> {\r\n  cachesService = new CachesService();\r\n  interval: any;\r\n\r\n  constructor(props: DetailsProps) {\r\n    super(props);\r\n    this.state = {\r\n      cache: { ...EMPTY_CACHE, ...props.cache },\r\n      bearing: 0,\r\n      distance: 0,\r\n      tab: \"description\"\r\n    };\r\n\r\n    this.interval = setInterval(() => {\r\n      this.props.onRefreshGeolocation();\r\n    }, 300);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.cachesService.fetchCacheDetails(this.props.cache.code).then(response => {\r\n      let extendedCache: CacheDetailsExtended = {\r\n        ...this.state.cache,\r\n        ...response\r\n      };\r\n      this.setState({ cache: extendedCache });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: DetailsProps) {\r\n    if (\r\n      this.props.geolocation.latitude !== prevProps.geolocation.latitude ||\r\n      this.props.geolocation.longitude !== prevProps.geolocation.longitude\r\n    ) {\r\n      this.setState({\r\n        bearing: calculateGeoPointDegreeBearing(\r\n          {\r\n            latitude: this.props.geolocation.latitude,\r\n            longitude: this.props.geolocation.longitude\r\n          },\r\n          {\r\n            latitude: +this.props.cache.location.split(\"|\")[0],\r\n            longitude: +this.props.cache.location.split(\"|\")[1]\r\n          }\r\n        ),\r\n        distance: calculateGeoPointMeterDistance(\r\n          {\r\n            latitude: this.props.geolocation.latitude,\r\n            longitude: this.props.geolocation.longitude\r\n          },\r\n          {\r\n            latitude: +this.props.cache.location.split(\"|\")[0],\r\n            longitude: +this.props.cache.location.split(\"|\")[1]\r\n          }\r\n        )\r\n      });\r\n    }\r\n  }\r\n\r\n  renderLog(log: CacheLog) {\r\n    let logDate = new Date(log.date);\r\n    return (\r\n      <div key={log.uuid}>\r\n        <b>\r\n          {log.user.username} - {log.type} - {logDate.toLocaleString()}\r\n        </b>\r\n        <p dangerouslySetInnerHTML={{ __html: log.comment }} />\r\n        <hr />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  switchTab(tab: Tabs) {\r\n    this.setState({ tab });\r\n  }\r\n\r\n  renderCompass() {\r\n    return (\r\n      <div className=\"Compass\">\r\n        <div className=\"Compass-background\" style={{ transform: `rotateZ(${360 - this.props.heading}deg)` }}>\r\n          <span className=\"Compass-north\">N</span>\r\n        </div>\r\n        <div\r\n          className=\"Compass-cache\"\r\n          style={{\r\n            transform: `rotateZ(${360 - this.props.heading + this.state.bearing}deg)`\r\n          }}\r\n        >\r\n          |\r\n        </div>\r\n        <div className=\"Compass-front\">\r\n          <br />|\r\n        </div>\r\n        <div className=\"Compass-distance\">{this.state.distance.toFixed(2)}m</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTab() {\r\n    switch (this.state.tab) {\r\n      case \"description\":\r\n        return <div dangerouslySetInnerHTML={{ __html: this.state.cache.description }} />;\r\n      case \"logs\":\r\n        return <div>{this.state.cache.latest_logs.map(this.renderLog)}</div>;\r\n      case \"compass\":\r\n        return (\r\n          <CompassComponent heading={this.props.heading} bearing={this.state.bearing} distance={this.state.distance} />\r\n        );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3>{this.state.cache.name}</h3>\r\n        <h5>{this.state.cache.code}</h5>\r\n        <br />\r\n        <p>\r\n          <b>Status:</b> {this.state.cache.status}\r\n        </p>\r\n        <p>\r\n          <b>Typ:</b> {this.state.cache.type}\r\n        </p>\r\n        <p>\r\n          <b>Ocena:</b> {this.state.cache.rating}/5\r\n        </p>\r\n        <p>\r\n          <b>Rekomendacje:</b> {this.state.cache.recommendations}\r\n        </p>\r\n        <p>\r\n          <b>Rozmiar:</b> {this.state.cache.size2}\r\n        </p>\r\n        <p>\r\n          <b>Trudność:</b> {this.state.cache.difficulty}/5\r\n        </p>\r\n        <p>\r\n          <b>Teren:</b> {this.state.cache.terrain}/5\r\n        </p>\r\n        <p>\r\n          <b>GPS:</b> {this.state.cache.location.split(\"|\").join(\" \")}\r\n        </p>\r\n        <ul className=\"Tabs\">\r\n          <li\r\n            className={`Tabs-single ${this.state.tab == \"description\" ? \"Tabs-single--active\" : \"\"}`}\r\n            onClick={_ => this.switchTab(\"description\")}\r\n          >\r\n            Opis\r\n          </li>\r\n          <li\r\n            className={`Tabs-single ${this.state.tab == \"logs\" ? \"Tabs-single--active\" : \"\"}`}\r\n            onClick={_ => this.switchTab(\"logs\")}\r\n          >\r\n            Logi\r\n          </li>\r\n          <li\r\n            className={`Tabs-single ${this.state.tab == \"compass\" ? \"Tabs-single--active\" : \"\"}`}\r\n            onClick={_ => this.switchTab(\"compass\")}\r\n          >\r\n            Kompas\r\n          </li>\r\n          <li\r\n            className={`Tabs-single ${this.state.tab == \"photos\" ? \"Tabs-single--active\" : \"\"}`}\r\n            onClick={_ => this.switchTab(\"photos\")}\r\n          >\r\n            Zdjęcia\r\n          </li>\r\n        </ul>\r\n        {this.renderTab()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./app.css\";\r\nimport Nearby from \"../nearby/nearby\";\r\nimport Details from \"../details/details\";\r\nimport { Geolocation } from \"../../interfaces/geolocation\";\r\nimport { CacheDetailsWithDistance } from \"../../interfaces/caches\";\r\n\r\ntype Pages = \"nearby\" | \"details\" | \"debug\";\r\n\r\ninterface Orientation {\r\n  absolute: boolean;\r\n  alpha: number;\r\n  beta: number;\r\n  gamma: number;\r\n  webkitCompassHeading: number;\r\n}\r\n\r\ninterface AppState {\r\n  page: Pages;\r\n  currentCache: CacheDetailsWithDistance | null;\r\n  geolocationReliable: boolean;\r\n  geolocationObject: boolean;\r\n  geolocationEnabled: boolean;\r\n  geolocation: Geolocation;\r\n  orientationReliable: boolean;\r\n  orientationRelativeEvents: boolean;\r\n  orientationAbsoluteEvents: boolean;\r\n  orientation: Orientation & { trueBearing: number };\r\n}\r\n\r\nexport default class App extends Component<any, AppState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      page: \"nearby\",\r\n      currentCache: null,\r\n      geolocationReliable: false,\r\n      geolocationObject: !!navigator.geolocation,\r\n      geolocationEnabled: false,\r\n      geolocation: {\r\n        latitude: 0,\r\n        longitude: 0,\r\n        accuracy: 0\r\n      },\r\n      orientationReliable: false,\r\n      orientationRelativeEvents: \"ondeviceorientation\" in window,\r\n      orientationAbsoluteEvents: \"ondeviceorientationabsolute\" in window,\r\n      orientation: {\r\n        absolute: false,\r\n        alpha: 0,\r\n        beta: 0,\r\n        gamma: 0,\r\n        webkitCompassHeading: 0,\r\n        trueBearing: 0\r\n      }\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    window.addEventListener(\r\n      this.state.orientationAbsoluteEvents\r\n        ? \"deviceorientationabsolute\"\r\n        : \"deviceorientation\",\r\n      this.handleOrientationEvent.bind(this),\r\n      true\r\n    );\r\n\r\n    if (this.state.geolocationObject) {\r\n      this.performGeolocation();\r\n    }\r\n  }\r\n\r\n  performGeolocation() {\r\n    navigator.geolocation.getCurrentPosition(\r\n      this.handlePositionEvent.bind(this),\r\n      () => {},\r\n      { enableHighAccuracy: true }\r\n    );\r\n  }\r\n\r\n  handleOrientationEvent(event: any) {\r\n    if (!this.state.orientationReliable) {\r\n      this.setState({\r\n        orientationReliable:\r\n          !!event.webkitCompassHeading || (event.absolute && !!event.alpha)\r\n      });\r\n    }\r\n    this.setState({\r\n      orientation: {\r\n        absolute: event.absolute || false,\r\n        alpha: +(event.alpha || 0).toFixed(2),\r\n        beta: +(event.beta || 0).toFixed(2),\r\n        gamma: +(event.gamma || 0).toFixed(2),\r\n        webkitCompassHeading: +(event.webkitCompassHeading || 0).toFixed(2),\r\n        trueBearing: (\r\n          (event.absolute ? event.alpha : event.webkitCompassHeading) || 0\r\n        ).toFixed(2)\r\n      }\r\n    });\r\n  }\r\n\r\n  handlePositionEvent(position: Position) {\r\n    if (!this.state.geolocationEnabled) {\r\n      this.setState({ geolocationEnabled: true });\r\n    }\r\n    if (!this.state.geolocationReliable) {\r\n      this.setState({\r\n        geolocationReliable:\r\n          !!position.coords.latitude || !!position.coords.longitude\r\n      });\r\n    }\r\n    this.setState({\r\n      geolocation: {\r\n        latitude: position.coords.latitude,\r\n        longitude: position.coords.longitude,\r\n        accuracy: position.coords.accuracy\r\n      }\r\n    });\r\n  }\r\n\r\n  handleCacheClick(currentCache: CacheDetailsWithDistance) {\r\n    this.setState({ currentCache });\r\n    this.setPage(\"details\");\r\n  }\r\n\r\n  setPage(page: Pages) {\r\n    this.setState({ page });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <h1>Opencacher</h1>\r\n        <div className=\"App-menu\">\r\n          <a href=\"#\" onClick={this.setPage.bind(this, \"nearby\")}>\r\n            Nearby\r\n          </a>{\" \"}\r\n          |&nbsp;\r\n          <a href=\"#\" onClick={this.setPage.bind(this, \"debug\")}>\r\n            Debug info\r\n          </a>\r\n        </div>\r\n\r\n        {this.state.page == \"debug\" && (\r\n          <div>\r\n            <p>\r\n              Geolocation object: {this.state.geolocationObject ? \"yes\" : \"no\"}\r\n            </p>\r\n            <p>\r\n              Geolocation enabled:{\" \"}\r\n              {this.state.geolocationEnabled ? \"yes\" : \"no\"}\r\n            </p>\r\n            <p>Geolocation reading: {JSON.stringify(this.state.geolocation)}</p>\r\n            <b>\r\n              Geolocation reliable:{\" \"}\r\n              {this.state.geolocationReliable ? \"yes\" : \"no\"}\r\n            </b>\r\n            <p>-----</p>\r\n            <p>\r\n              Orientation relative events:{\" \"}\r\n              {this.state.orientationRelativeEvents ? \"yes\" : \"no\"}\r\n            </p>\r\n            <p>\r\n              Orientation absolute events:{\" \"}\r\n              {this.state.orientationAbsoluteEvents ? \"yes\" : \"no\"}\r\n            </p>\r\n            <p>\r\n              Orientation webkit events:{\" \"}\r\n              {!!this.state.orientation.webkitCompassHeading ? \"yes\" : \"no\"}\r\n            </p>\r\n            <p>Orientation reading: {JSON.stringify(this.state.orientation)}</p>\r\n            <b>\r\n              Orientation reliable:{\" \"}\r\n              {this.state.orientationReliable ? \"yes\" : \"no\"}\r\n            </b>\r\n          </div>\r\n        )}\r\n\r\n        {this.state.page == \"nearby\" &&\r\n          ((this.state.geolocationReliable && (\r\n            <Nearby\r\n              geolocation={this.state.geolocation}\r\n              onCacheClick={this.handleCacheClick.bind(this)}\r\n            />\r\n          )) ||\r\n            (!this.state.geolocationEnabled && (\r\n              <p>\r\n                Please enable geolocation permission for your browser and this\r\n                page to see nearby caches.\r\n              </p>\r\n            )) ||\r\n            (!this.state.geolocationObject && <p>Device not supported :(</p>))}\r\n\r\n        {this.state.page == \"details\" && this.state.currentCache && (\r\n          <Details\r\n            cache={this.state.currentCache}\r\n            geolocation={this.state.geolocation}\r\n            heading={this.state.orientation.trueBearing}\r\n            onRefreshGeolocation={this.performGeolocation.bind(this)}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './pages/app/app';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}